{"ast":null,"code":"import { SocketService } from './socket.service';\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material/dialog';\nimport { PdfPrinterComponent } from './pdf-printer.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./socket.service\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/toolbar\";\nimport * as i5 from \"@angular/material/icon\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/material/chips\";\nimport * as i8 from \"@angular/material/badge\";\nimport * as i9 from \"@angular/material/tooltip\";\nimport * as i10 from \"@angular/material/menu\";\nimport * as i11 from \"@angular/material/button\";\nimport * as i12 from \"@angular/material/form-field\";\nimport * as i13 from \"@angular/material/input\";\nimport * as i14 from \"@angular/forms\";\nimport * as i15 from \"@angular/material/card\";\nfunction AppComponent_mat_chip_list_3_mat_chip_8_mat_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 20);\n    i0.ɵɵtext(1, \"account_circle\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_mat_chip_list_3_mat_chip_8_mat_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-icon\", 21);\n    i0.ɵɵtext(1, \"gavel\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AppComponent_mat_chip_list_3_mat_chip_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip\", 16);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_chip_list_3_mat_chip_8_Template_mat_chip_click_0_listener() {\n      const user_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.chat(user_r3));\n    });\n    i0.ɵɵtemplate(1, AppComponent_mat_chip_list_3_mat_chip_8_mat_icon_1_Template, 2, 0, \"mat-icon\", 17)(2, AppComponent_mat_chip_list_3_mat_chip_8_mat_icon_2_Template, 2, 0, \"mat-icon\", 18);\n    i0.ɵɵelementStart(3, \"span\", 19);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const user_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"id\", user_r3)(\"matTooltip\", ctx_r3.chipToolTip(user_r3));\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.socketService.name === user_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.socketService.instance.owner === user_r3);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"matBadge\", ctx_r3.unreadMessages[user_r3]);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(user_r3);\n  }\n}\nfunction AppComponent_mat_chip_list_3_span_9_mat_chip_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip\", 23);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_chip_list_3_span_9_mat_chip_1_Template_mat_chip_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const user_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.chat(user_r6));\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 24);\n    i0.ɵɵtext(2, \"cloud_off\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 19);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const user_r6 = i0.ɵɵnextContext().$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"id\", user_r6)(\"matTooltip\", user_r6 + \" is offline\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matBadge\", ctx_r3.unreadMessages[user_r6]);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(user_r6);\n  }\n}\nfunction AppComponent_mat_chip_list_3_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtemplate(1, AppComponent_mat_chip_list_3_span_9_mat_chip_1_Template, 5, 4, \"mat-chip\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const user_r6 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.socketService.conversations[user_r6]);\n  }\n}\nfunction AppComponent_mat_chip_list_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip-list\")(1, \"mat-chip\", 11)(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"mat-chip\", 12)(5, \"mat-icon\", 13);\n    i0.ɵɵtext(6, \"how_to_vote\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, AppComponent_mat_chip_list_3_mat_chip_8_Template, 5, 6, \"mat-chip\", 14)(9, AppComponent_mat_chip_list_3_span_9_Template, 2, 1, \"span\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.socketService.instance.title, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.socketService.votesLeft, \" \");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.socketService.instance.users);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.socketService.offlineUsers);\n  }\n}\nfunction AppComponent_h2_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r3.introMessage);\n  }\n}\nfunction AppComponent_mat_chip_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-chip\", 25)(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"vertical_align_bottom\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const download_r7 = i0.ɵɵreference(8);\n    i0.ɵɵproperty(\"matMenuTriggerFor\", download_r7);\n  }\n}\nfunction AppComponent_mat_chip_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip\", 26);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_chip_13_Template_mat_chip_click_0_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onLockPress());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"matTooltip\", (!ctx_r3.socketService.instance.locked ? \"\" : \"un\") + \"lock instance\")(\"disabled\", ctx_r3.socketService.instance.owner !== ctx_r3.socketService.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"lock\", ctx_r3.socketService.instance.locked ? \"\" : \"_open\", \"\");\n  }\n}\nfunction AppComponent_mat_chip_14_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-chip\", 27);\n    i0.ɵɵlistener(\"click\", function AppComponent_mat_chip_14_Template_mat_chip_click_0_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.delete());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\", 28);\n    i0.ɵɵtext(2, \"delete\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r3.socketService.instance.owner !== ctx_r3.socketService.name);\n  }\n}\nfunction InfoDialogComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function InfoDialogComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.close());\n    });\n    i0.ɵɵelementStart(1, \"mat-icon\");\n    i0.ɵɵtext(2, \"clear\");\n    i0.ɵɵelementEnd()();\n  }\n}\nconst _c0 = (a0, a1) => ({\n  incoming: a0,\n  outgoing: a1,\n  message: true\n});\nfunction ChatDialogComponent_i_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"i\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\"\", ctx_r0.name, \" is typing...\");\n  }\n}\nfunction ChatDialogComponent_mat_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 9)(1, \"b\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r2 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(3, _c0, message_r2.name === ctx_r0.name, message_r2.name !== ctx_r0.name));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(message_r2.name);\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\": \", message_r2.message, \" \");\n  }\n}\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(socketService, dialog) {\n      this.socketService = socketService;\n      this.dialog = dialog;\n      this.introMessage = `Welcome to Orion's retrospective application.`;\n      this.unreadMessages = {};\n      socketService.socket.fromEvent('test').subscribe(content => {\n        dialog.open(InfoDialogComponent, {\n          data: {\n            title: 'Server Message',\n            content\n          },\n          width: '600px'\n        });\n      });\n      socketService.systemMessage.subscribe(content => {\n        dialog.open(InfoDialogComponent, {\n          data: {\n            title: 'Client Message',\n            content\n          },\n          width: '600px'\n        });\n      });\n      socketService.socket.fromEvent('deleted-instance').subscribe(() => {\n        this.dialog.open(InfoDialogComponent, {\n          data: {\n            title: 'Deleted Instance',\n            content: 'The instance you were viewing has been deleted.'\n          },\n          width: '600px'\n        }).afterClosed().subscribe(() => {\n          this.newInstance();\n        });\n      });\n      socketService.socket.fromEvent('chat').subscribe(message => {\n        if (message.name !== this.chattingWith) {\n          this.unreadMessages[message.name] = (this.unreadMessages[message.name] || 0) + 1;\n          document.getElementById(message.name).animate([{\n            transform: 'translateX(5px)'\n          }, {\n            transform: 'translateX(-5px)'\n          }, {\n            transform: 'translateX(0)'\n          }, {\n            transform: 'translateY(5px)'\n          }, {\n            transform: 'translateY(-5px)'\n          }, {\n            transform: 'translateY(0)'\n          }], {\n            duration: 110,\n            iterations: 15\n          });\n        }\n      });\n    }\n    chat(name) {\n      if (name === this.socketService.name) {\n        this.socketService.systemMessage.next('you can\\'t chat with yourself');\n      } else {\n        this.chattingWith = name;\n        this.unreadMessages[name] = null;\n        this.dialog.open(ChatDialogComponent, {\n          width: '600px',\n          data: {\n            name\n          }\n        }).afterClosed().subscribe(() => this.chattingWith = null);\n      }\n    }\n    onLockPress() {\n      if (this.socketService.instance.owner === this.socketService.name) {\n        this.socketService.emit('lock', null);\n      }\n    }\n    about() {\n      this.dialog.open(InfoDialogComponent, {\n        data: {\n          title: 'Retrospective Application created by Orion Wolf-Hubbard',\n          content: 'Contact: owolfhu1@gmail.com'\n        },\n        width: '600px'\n      });\n    }\n    delete() {\n      if (this.socketService.instance.owner === this.socketService.name) {\n        this.dialog.open(InfoDialogComponent, {\n          data: {\n            title: 'Confirmation',\n            content: 'Are you sure you wish to permanently delete this instance?',\n            cancelable: true\n          },\n          width: '600px'\n        }).afterClosed().subscribe(doDelete => {\n          if (doDelete) {\n            if (this.socketService.instance.title === 'demo') {\n              this.dialog.open(InfoDialogComponent, {\n                data: {\n                  title: 'Sorry',\n                  content: 'You can not delete the demo instance.'\n                },\n                width: '600px'\n              });\n            } else {\n              this.socketService.emit('delete-instance');\n            }\n            ;\n          }\n        });\n      }\n    }\n    newInstance() {\n      const prod = window.location.href.indexOf('/retro-client/') > -1;\n      window.location.href = window.location.href.replace(window.location.pathname, prod ? '/retro-client/create' : '/create');\n    }\n    downloadCSV() {\n      const instance = this.socketService.instance;\n      const makeRow = (obj, array, prefix) => {\n        const arr = [prefix];\n        arr.push(obj.text.replace(/\\r?\\n|\\r/g, '/'));\n        arr.push(obj.ups.length);\n        arr.push(obj.downs.length);\n        if (obj.emoji) {\n          const strings = [];\n          obj.emoji.forEach(emoji => {\n            strings.push(`(${emoji.emoji.native} - ${emoji.names.join('/')})`);\n          });\n          arr.push(strings.join(' '));\n        }\n        array.push(arr);\n        if (obj.comments) {\n          obj.comments.forEach(comment => makeRow(comment, array, 'comment'));\n        }\n      };\n      const csv = [`Participants:,${Object.keys(instance.votes).join(',')}`];\n      csv.push('TYPE,STATEMENT,UP VOTES,DOWN VOTES,EMOJI');\n      instance.columns.forEach(col => {\n        const items = [[col.text]];\n        col.items.forEach(item => {\n          makeRow(item, items, '');\n        });\n        csv.push(items.join('\\r\\n'));\n      });\n      const junks = [['Trash']];\n      instance.trash.forEach(rubbage => {\n        makeRow(rubbage, junks, '');\n      });\n      csv.push(junks.join('\\r\\n'));\n      const csvArray = csv.join('\\r\\n\\r\\n');\n      const a = document.createElement('a');\n      const blob = new Blob([csvArray], {\n        type: 'text/csv'\n      });\n      const url = window.URL.createObjectURL(blob);\n      a.href = url;\n      a.download = this.socketService.instance.title + '.csv';\n      a.click();\n      window.URL.revokeObjectURL(url);\n      a.remove();\n    }\n    downloadPDF() {\n      this.dialog.open(PdfPrinterComponent, {\n        width: '2000px'\n      });\n    }\n    chipToolTip(name) {\n      if (this.socketService.name === name) {\n        return '';\n      }\n      if (this.unreadMessages[name]) {\n        return `You have ${this.unreadMessages[name]} unread message${this.unreadMessages[name] > 1 ? 's' : ''} from ${name}`;\n      }\n      return `chat with ${name}`;\n    }\n    static {\n      this.ɵfac = function AppComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || AppComponent)(i0.ɵɵdirectiveInject(i1.SocketService), i0.ɵɵdirectiveInject(i2.MatDialog));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: AppComponent,\n        selectors: [[\"app-root\"]],\n        decls: 22,\n        vars: 5,\n        consts: [[\"download\", \"\"], [1, \"body\"], [\"color\", \"primary\"], [4, \"ngIf\"], [\"color\", \"primary\", \"selected\", \"\", \"matTooltip\", \"Download\", 3, \"matMenuTriggerFor\", 4, \"ngIf\"], [\"mat-menu-item\", \"\", 3, \"click\"], [\"color\", \"primary\", \"selected\", \"\", 3, \"matTooltip\", \"disabled\", \"click\", 4, \"ngIf\"], [\"color\", \"primary\", \"selected\", \"\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"color\", \"primary\", \"selected\", \"\", 3, \"click\"], [\"matTooltip\", \"create a new instance\"], [\"matTooltip\", \"about\"], [\"color\", \"primary\", \"selected\", \"\", \"matTooltip\", \"instance title\"], [\"color\", \"primary\", \"selected\", \"\"], [\"matTooltip\", \"votes left\"], [\"style\", \"overflow: visible\", 3, \"id\", \"matTooltip\", \"click\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngFor\", \"ngForOf\"], [2, \"overflow\", \"visible\", 3, \"click\", \"id\", \"matTooltip\"], [\"matTooltip\", \"self\", 4, \"ngIf\"], [\"matTooltip\", \"instance owner\", 4, \"ngIf\"], [\"matBadgeColor\", \"warn\", \"matBadgeSize\", \"large\", 3, \"matBadge\"], [\"matTooltip\", \"self\"], [\"matTooltip\", \"instance owner\"], [\"style\", \"overflow: visible\", \"disabled\", \"\", 3, \"id\", \"matTooltip\", \"click\", 4, \"ngIf\"], [\"disabled\", \"\", 2, \"overflow\", \"visible\", 3, \"click\", \"id\", \"matTooltip\"], [\"matTooltip\", \"offline\"], [\"color\", \"primary\", \"selected\", \"\", \"matTooltip\", \"Download\", 3, \"matMenuTriggerFor\"], [\"color\", \"primary\", \"selected\", \"\", 3, \"click\", \"matTooltip\", \"disabled\"], [\"color\", \"primary\", \"selected\", \"\", 3, \"click\", \"disabled\"], [\"matTooltip\", \"delete instance\"]],\n        template: function AppComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            const _r1 = i0.ɵɵgetCurrentView();\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"mat-toolbar\", 2)(2, \"mat-toolbar-row\");\n            i0.ɵɵtemplate(3, AppComponent_mat_chip_list_3_Template, 10, 4, \"mat-chip-list\", 3)(4, AppComponent_h2_4_Template, 2, 1, \"h2\", 3);\n            i0.ɵɵelementStart(5, \"mat-chip-list\");\n            i0.ɵɵtemplate(6, AppComponent_mat_chip_6_Template, 3, 1, \"mat-chip\", 4);\n            i0.ɵɵelementStart(7, \"mat-menu\", null, 0)(9, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_9_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.downloadCSV());\n            });\n            i0.ɵɵtext(10, \"CSV\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_button_click_11_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.downloadPDF());\n            });\n            i0.ɵɵtext(12, \"PDF\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(13, AppComponent_mat_chip_13_Template, 3, 3, \"mat-chip\", 6)(14, AppComponent_mat_chip_14_Template, 3, 1, \"mat-chip\", 7);\n            i0.ɵɵelementStart(15, \"mat-chip\", 8);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_mat_chip_click_15_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.newInstance());\n            });\n            i0.ɵɵelementStart(16, \"mat-icon\", 9);\n            i0.ɵɵtext(17, \"addchart\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"mat-chip\", 8);\n            i0.ɵɵlistener(\"click\", function AppComponent_Template_mat_chip_click_18_listener() {\n              i0.ɵɵrestoreView(_r1);\n              return i0.ɵɵresetView(ctx.about());\n            });\n            i0.ɵɵelementStart(19, \"mat-icon\", 10);\n            i0.ɵɵtext(20, \"new_releases\");\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelement(21, \"router-outlet\");\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.socketService.instance);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.socketService.instance);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.socketService.instance);\n            i0.ɵɵadvance(7);\n            i0.ɵɵproperty(\"ngIf\", ctx.socketService.instance);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.socketService.instance);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i4.MatToolbar, i4.MatToolbarRow, i5.MatIcon, i6.RouterOutlet, i7.MatChip, i8.MatBadge, i9.MatTooltip, i10.MatMenu, i10.MatMenuItem, i10.MatMenuTrigger],\n        styles: [\".body[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}mat-toolbar-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between}\"]\n      });\n    }\n  }\n  return AppComponent;\n})();\nexport let InfoDialogComponent = /*#__PURE__*/(() => {\n  class InfoDialogComponent {\n    constructor(socketService, dialogRef, data) {\n      this.socketService = socketService;\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.title = data.title;\n      this.content = data.content;\n      this.cancelable = data.cancelable;\n    }\n    close(yes = false) {\n      this.dialogRef.close(yes);\n    }\n    static {\n      this.ɵfac = function InfoDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || InfoDialogComponent)(i0.ɵɵdirectiveInject(i1.SocketService), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: InfoDialogComponent,\n        selectors: [[\"info-dialog\"]],\n        decls: 10,\n        vars: 3,\n        consts: [[1, \"header\"], [1, \"right-buttons\"], [\"mat-mini-fab\", \"\", \"color\", \"warn\", 3, \"click\", 4, \"ngIf\"], [\"mat-mini-fab\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-mini-fab\", \"\", \"color\", \"warn\", 3, \"click\"]],\n        template: function InfoDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h2\", 0);\n            i0.ɵɵtext(1);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"p\");\n            i0.ɵɵtext(3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 1);\n            i0.ɵɵtemplate(5, InfoDialogComponent_button_5_Template, 3, 0, \"button\", 2);\n            i0.ɵɵtext(6, \" \\u00A0\\u00A0 \");\n            i0.ɵɵelementStart(7, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function InfoDialogComponent_Template_button_click_7_listener() {\n              return ctx.close(true);\n            });\n            i0.ɵɵelementStart(8, \"mat-icon\");\n            i0.ɵɵtext(9, \"check\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate(ctx.title);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.content);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.cancelable);\n          }\n        },\n        dependencies: [i3.NgIf, i5.MatIcon, i11.MatMiniFabButton],\n        styles: [\".header[_ngcontent-%COMP%]{margin-top:0}\"]\n      });\n    }\n  }\n  return InfoDialogComponent;\n})();\nexport let ChatDialogComponent = /*#__PURE__*/(() => {\n  class ChatDialogComponent {\n    constructor(socketService, dialogRef, data) {\n      this.socketService = socketService;\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.input = '';\n      this.inputWas = '';\n      this.name = data.name;\n      if (!socketService.conversations[this.name]) {\n        socketService.conversations[this.name] = [];\n      }\n    }\n    inputChanges(incoming) {\n      if (!this.inputWas && incoming) {\n        this.socketService.startTyping(this.name);\n      } else if (this.inputWas && !incoming) {\n        this.socketService.stopTyping(this.name);\n      }\n      this.inputWas = incoming;\n    }\n    send() {\n      if (this.input) {\n        this.socketService.sendMessage(this.input, this.name);\n        this.input = '';\n        this.inputChanges('');\n      }\n    }\n    close(yes = false) {\n      this.dialogRef.close(yes);\n    }\n    ngOnDestroy() {\n      this.inputChanges('');\n    }\n    static {\n      this.ɵfac = function ChatDialogComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ChatDialogComponent)(i0.ɵɵdirectiveInject(i1.SocketService), i0.ɵɵdirectiveInject(i2.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ChatDialogComponent,\n        selectors: [[\"chat-dialog\"]],\n        decls: 14,\n        vars: 5,\n        consts: [[1, \"header\"], [1, \"body\"], [4, \"ngIf\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [1, \"input-wrapper\"], [\"appearance\", \"outline\", \"color\", \"accent\", 1, \"full\"], [\"autocomplete\", \"off\", \"matInput\", \"\", 1, \"full\", 3, \"ngModelChange\", \"keyup.enter\", \"ngModel\"], [\"mat-icon-button\", \"\", \"color\", \"accent\", \"matTooltip\", \"send message\", \"matSuffix\", \"\", 3, \"click\", \"disabled\"], [\"color\", \"warn\", \"mat-icon-button\", \"\", 1, \"close\", 3, \"click\"], [3, \"ngClass\"]],\n        template: function ChatDialogComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h2\", 0);\n            i0.ɵɵtext(1);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"mat-card\", 1);\n            i0.ɵɵtemplate(3, ChatDialogComponent_i_3_Template, 2, 1, \"i\", 2)(4, ChatDialogComponent_mat_card_4_Template, 4, 6, \"mat-card\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"span\", 4)(6, \"mat-form-field\", 5)(7, \"input\", 6);\n            i0.ɵɵlistener(\"ngModelChange\", function ChatDialogComponent_Template_input_ngModelChange_7_listener($event) {\n              return ctx.inputChanges($event);\n            })(\"keyup.enter\", function ChatDialogComponent_Template_input_keyup_enter_7_listener() {\n              return ctx.send();\n            });\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function ChatDialogComponent_Template_input_ngModelChange_7_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.input, $event) || (ctx.input = $event);\n              return $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function ChatDialogComponent_Template_button_click_8_listener() {\n              return ctx.send();\n            });\n            i0.ɵɵelementStart(9, \"mat-icon\");\n            i0.ɵɵtext(10, \"send\");\n            i0.ɵɵelementEnd()()()();\n            i0.ɵɵelementStart(11, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function ChatDialogComponent_Template_button_click_11_listener() {\n              return ctx.dialogRef.close();\n            });\n            i0.ɵɵelementStart(12, \"mat-icon\");\n            i0.ɵɵtext(13, \"remove_circle\");\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate1(\"Private chat with \", ctx.name, \"\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.socketService.typingMap[ctx.name]);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngForOf\", ctx.socketService.conversations[ctx.name]);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.input);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"disabled\", !ctx.input);\n          }\n        },\n        dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i5.MatIcon, i11.MatIconButton, i12.MatFormField, i12.MatSuffix, i13.MatInput, i14.DefaultValueAccessor, i14.NgControlStatus, i14.NgModel, i15.MatCard, i9.MatTooltip],\n        styles: [\"[_nghost-%COMP%]{position:relative;padding-bottom:0}.incoming[_ngcontent-%COMP%]{background:#696969}.body[_ngcontent-%COMP%]{height:400px;display:flex;flex-direction:column-reverse;overflow-y:scroll;border:gray solid 1px;padding:5px}.header[_ngcontent-%COMP%]{margin-top:0}.close[_ngcontent-%COMP%]{position:absolute;top:-10px;right:-5px}.message[_ngcontent-%COMP%]{padding:5px 10px;margin:5px 0 0;border-radius:15px}.body[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.body[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none}.full[_ngcontent-%COMP%]{width:100%}.input-wrapper[_ngcontent-%COMP%]  .mat-form-field-wrapper{padding:0}.input-wrapper[_ngcontent-%COMP%]  .mat-form-field-infix{border-top:0;padding-bottom:3px;padding-top:0}.input-wrapper[_ngcontent-%COMP%]  .mat-form-field{line-height:2}\"]\n      });\n    }\n  }\n  return ChatDialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}